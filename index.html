<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Калькулятор пенсії для військових</title>
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #f4f6f9;
      color: #333;
      line-height: 1.6;
      padding: 20px;
    }
    .container {
      max-width: 900px;
      margin: auto;
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #2c3e50;
      margin-bottom: 10px;
    }
    p.subtitle {
      text-align: center;
      color: #7f8c8d;
      font-size: 16px;
      margin-bottom: 30px;
    }
    .form-group {
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #2c3e50;
    }
    input[type="text"],
    input[type="number"],
    select,
    input[type="range"] {
      width: 100%;
      padding: 10px;
      border: 1px solid #bdc3c7;
      border-radius: 6px;
      font-size: 16px;
      box-sizing: border-box;
    }
    .range-container {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .pages-number {
      font-size: 18px;
      font-weight: bold;
      color: #27ae60;
      min-width: 50px;
    }
    .radio-group {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
    }
    .radio-item {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 14px;
    }

    button {
      width: 100%;
      padding: 14px;
      background: #27ae60;
      color: white;
      font-size: 18px;
      font-weight: bold;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 20px;
    }
    button:hover {
      background: #219653;
    }
    .result.price {
      font-size: 28px;
      font-weight: bold;
      color: #27ae60;
      text-align: center;
      margin-top: 20px;
      padding: 15px;
      background: #e9f7ef;
      border-radius: 8px;
      border: 2px dashed #27ae60;
    }

    @media (max-width: 600px) {
      .container {
        padding: 20px;
      }
      h1 { font-size: 24px; }
      .subtitle { font-size: 14px; }
      .radio-item { font-size: 13px; }
      button { padding: 12px; font-size: 16px; }
      .result.price { font-size: 24px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Калькулятор пенсії</h1>
    <p class="subtitle">Для військовослужбовців та працівників силових структур України</p>

    <div class="form-group">
      <label>Ваше звання</label>
      <select id="Your-rank" required>
        <option value="">Оберіть звання</option>
        <option value="Солдат">Солдат</option>
        <option value="Старший солдат">Старший солдат</option>
        <option value="Молодший сержант">Молодший сержант</option>
        <option value="Сержант">Сержант</option>
        <option value="Старший сержант">Старший сержант</option>
        <option value="Молодший лейтенант">Молодший лейтенант</option>
        <option value="Лейтенант">Лейтенант</option>
        <option value="Старший лейтенант">Старший лейтенант</option>
        <option value="Прапорщик">Прапорщик</option>
        <option value="Старший прапорщик">Старший прапорщик</option>
        <option value="Капітан">Капітан</option>
        <option value="Майор">Майор</option>
        <option value="Підполковник">Підполковник</option>
        <option value="Полковник">Полковник</option>
        <option value="Бригадний генерал">Бригадний генерал</option>
        <option value="Генерал-майор">Генерал-майор</option>
        <option value="Генерал-лейтенант">Генерал-лейтенант</option>
        <option value="Генерал-полковник">Генерал-полковник</option>
        <option value="Генерал армії">Генерал армії</option>
      </select>
    </div>

    <div class="form-group">
      <label>Структура, в якій служили</label>
      <select id="Your-structure" required>
        <option value="">Оберіть структуру</option>
        <option value="Збройні сили України">Збройні сили України</option>
        <option value="Державна служба надзвичайних ситуацій (МНС)">Державна служба надзвичайних ситуацій (МНС)</option>
        <option value="Державна прикордонна служба">Державна прикордонна служба</option>
        <option value="Міліція">Міліція</option>
        <option value="Державна пенітенціарна служба України">Державна пенітенціарна служба України</option>
        <option value="Служба безпеки України">Служба безпеки України</option>
        <option value="Національна поліція">Національна поліція</option>
        <option value="Національна гвардія">Національна гвардія</option>
        <option value="Державна фіскальна служба">Державна фіскальна служба</option>
        <option value="Державна спеціальна служба транспорту">Державна спеціальна служба транспорту</option>
        <option value="Служба зовнішньої розвідки України">Служба зовнішньої розвідки України</option>
        <option value="Космічне агентство">Космічне агентство</option>
        <option value="Державна служба охорони">Державна служба охорони</option>
      </select>
    </div>

    <div class="form-group">
      <label>Тип пенсії</label>
      <select id="typeofpension" required>
        <option value="">Оберіть тип</option>
        <option value="За вислугою років">За вислугою років</option>
        <option value="Звільнення у зв'язку зі станом здоров'я">Звільнення у зв'язку зі станом здоров'я</option>
        <option value="По інвалідності">По інвалідності</option>
        <option value="За змішаним стажем">За змішаним стажем</option>
        <option value="По втраті годувальника">По втраті годувальника</option>
      </select>
    </div>

    <div class="form-group">
      <label>Вислуга років (20–50)</label>
      <div class="range-container">
        <input type="range" min="20" max="50" value="25" class="pages-slider" oninput="document.querySelector('.pages-number').textContent = this.value">
        <span class="pages-number">25</span>
      </div>
    </div>

    <div class="form-group">
      <label>Років цивільного стажу</label>
      <input type="number" id="civilyears" value="0" min="0" max="50">
    </div>

    <div class="form-group">
      <label>Років військового стажу</label>
      <input type="number" id="waryears" value="25" min="0" max="50">
    </div>

    <div class="form-group">
      <label>Чи є довідка про розмір грошового забезпечення?</label>
      <div class="dovidka radio-group">
        <label class="radio-item"><input type="radio" name="dovidka" value="radio-2"> Ні</label>
        <label class="radio-item"><input type="radio" name="dovidka" value="radio-3"> Так</label>
      </div>
    </div>

    <div class="form-group">
      <label>Розмір грошового забезпечення за довідкою (грн)</label>
      <input type="number" id="field-25" value="0" min="0">
    </div>

    <div class="form-group">
      <label>Рік звільнення</label>
      <div class="year-wrap radio-group">
        <label class="radio-item"><input type="radio" name="year" value="2011"> 2011</label>
        <label class="radio-item"><input type="radio" name="year" value="2011-2014"> 2011–2014</label>
        <label class="radio-item"><input type="radio" name="year" value="2014-2018"> 2014–2018</label>
        <label class="radio-item"><input type="radio" name="year" value="2018+"> 2018+</label>
      </div>
    </div>

    <div class="form-group">
      <label>Чи є чорнобильцем?</label>
      <div class="chornobylec radio-group">
        <label class="radio-item"><input type="radio" name="chornobylec" value="firstCategoy"> 1 категорія</label>
        <label class="radio-item"><input type="radio" name="chornobylec" value="secondCategoy"> 2 категорія</label>
        <label class="radio-item"><input type="radio" name="chornobylec" value="no"> Ні</label>
      </div>
    </div>

    <div class="form-group">
      <label>Чи звільнили у зв’язку зі станом здоров’я?</label>
      <div class="health radio-group">
        <label class="radio-item"><input type="radio" name="health" value="yes"> Так</label>
        <label class="radio-item"><input type="radio" name="health" value="no"> Ні</label>
      </div>
    </div>

    <div class="form-group">
      <label>Звільнення по інвалідності?</label>
      <div class="invalidnist radio-group">
        <label class="radio-item"><input type="radio" name="invalidnist" value="war"> По війні</label>
        <label class="radio-item"><input type="radio" name="invalidnist" value="army"> Загальна</label>
      </div>
    </div>

    <div class="form-group">
      <label>Група інвалідності</label>
      <div class="inv-group radio-group">
        <label class="radio-item"><input type="radio" name="invGroup" value="1-3"> I чи II (по війні)</label>
        <label class="radio-item"><input type="radio" name="invGroup" value="2-3"> II чи III (звичайна)</label>
        <label class="radio-item"><input type="radio" name="invGroup" value="3"> III (звичайна)</label>
      </div>
    </div>

    <div class="form-group">
      <label>По втраті годувальника</label>
      <div class="byloss radio-group">
        <label class="radio-item"><input type="radio" name="vtrata" value="radio-8"> На дитину до 18 років</label>
        <label class="radio-item"><input type="radio" name="vtrata" value="radio-10"> На інших членів сім'ї</label>
      </div>
    </div>

    <button id="resultBtn">Розрахувати пенсію</button>
    <div class="result price">— грн</div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const pagesNumberElement = document.querySelector('.pages-number');
      let lastNumber;

      function updateNumber() {
        const newNumber = parseInt(pagesNumberElement.textContent);
        if (newNumber !== lastNumber) {
          lastNumber = newNumber;
        }
      }

      const observer = new MutationObserver(updateNumber);
      observer.observe(pagesNumberElement, { characterData: true, subtree: true });
      updateNumber();

      const zvanieVal = document.getElementById('Your-rank');
      const strVal = document.getElementById('Your-structure');
      const pensTypeVal = document.getElementById('typeofpension');
      const civilyearsVal = document.getElementById('civilyears');
      const waryearsVal = document.getElementById('waryears');
      const dovidkaVal = document.getElementById('field-25');

      let zvanieValue, strValue, pensTypeValue, civilyearsValue, waryearsValue, dovidkaValue, year, chernobylec, health, invalidnist, invGroup, dovidka, vtrata;

      const updateLoan = (strValue, zvanieValue) => {
        const loanMappings = {
          'Збройні сили України': { 'Солдат': 9870, 'Старший солдат': 10000, /* ... інші значення */ },
          'Державна служба надзвичайних ситуацій (МНС)': { 'Солдат': 9370, /* ... */ },
          'Державна прикордонна служба': { 'Солдат': 10370, /* ... */ },
          'Міліція': { 'Солдат': 9500, 'Капітан': 14360, 'Полковник': 27951, 'Генерал армії': 50000 },
          'Державна пенітенціарна служба України': { 'Солдат': 5000, 'Капітан': 11000, 'Полковник': 20000 },
          'Служба безпеки України': { 'Солдат': 9870, 'Капітан': 16000, 'Полковник': 35430 },
          'Національна поліція': { 'Солдат': 9870, 'Капітан': 17105, 'Полковник': 35430 },
          'Національна гвардія': { 'Солдат': 9870, 'Капітан': 14360, 'Полковник': 27951 },
          'Державна фіскальна служба': { 'Солдат': 4000, 'Капітан': 10000, 'Полковник': 19000 },
          'Державна спеціальна служба транспорту': { 'Солдат': 9500, 'Капітан': 15800, 'Полковник': 28831 },
          'Служба зовнішньої розвідки України': { 'Солдат': 9870, 'Капітан': 17983, 'Полковник': 22940 },
          'Космічне агентство': { 'Солдат': 9870, 'Капітан': 15800, 'Полковник': 20233 },
          'Державна служба охорони': { 'Солдат': 9870, 'Капітан': 17105, 'Полковник': 35430 }
        };
        return loanMappings[strValue]?.[zvanieValue] || 0;
      };

      zvanieVal.addEventListener('change', () => zvanieValue = zvanieVal.value);
      strVal.addEventListener('change', () => strValue = strVal.value);
      pensTypeVal.addEventListener('change', () => pensTypeValue = pensTypeVal.value);
      civilyearsVal.addEventListener('change', () => civilyearsValue = parseFloat(civilyearsVal.value) || 0);
      waryearsVal.addEventListener('change', () => waryearsValue = parseFloat(waryearsVal.value) || 0);
      dovidkaVal.addEventListener('change', () => dovidkaValue = parseFloat(dovidkaVal.value) || 0);

      // Обробники радіо-кнопок
      document.querySelectorAll('.year-wrap input[type="radio"]').forEach(el => {
        el.addEventListener('change', () => year = el.value);
      });
      document.querySelectorAll('.chornobylec input[type="radio"]').forEach(el => {
        el.addEventListener('change', () => chernobylec = el.value === 'firstCategoy' ? 1 : el.value === 'secondCategoy' ? 0.95 : 0);
      });
      document.querySelectorAll('.health input[type="radio"]').forEach(el => {
        el.addEventListener('change', () => health = el.value);
      });
      document.querySelectorAll('.dovidka input[type="radio"]').forEach(el => {
        el.addEventListener('change', () => dovidka = el.value);
      });
      document.querySelectorAll('.byloss input[type="radio"]').forEach(el => {
        el.addEventListener('change', () => vtrata = el.value);
      });

      const invSelection = {
        invalidnist: "", invGroup: "",
        init() {
          document.querySelectorAll('.invalidnist input[type="radio"]').forEach(el => {
            el.addEventListener('change', () => this.invalidnist = el.value);
          });
          document.querySelectorAll('.inv-group input[type="radio"]').forEach(el => {
            el.addEventListener('change', () => this.invGroup = el.value);
          });
        },
        getPercent() {
          const map = { "war": { "1-3": 1, "2-3": 0.8, "3": 0.6 }, "army": { "1-3": 0.7, "2-3": 0.6, "3": 0.4 } };
          return map[this.invalidnist]?.[this.invGroup] || 0;
        }
      };
      invSelection.init();

      function updatePensValue() {
        let pensValue = 0;
        const mixedVal = civilyearsValue + waryearsValue;

        if (pensTypeValue === "За вислугою років") {
          pensValue = (50 + (lastNumber - 20) * 3) / 100;
          if (year === '2011') pensValue = Math.min(pensValue, chernobylec === 1 ? 1 : chernobylec === 0.95 ? 0.95 : 0.8);
          else if (year === '2011-2014') pensValue = Math.min(pensValue, chernobylec === 1 ? 1 : chernobylec === 0.95 ? 0.95 : 0.9);
          else if (year === '2014-2018') pensValue = Math.min(pensValue, chernobylec === 1 ? 1 : chernobylec === 0.95 ? 0.95 : 0.7);
          else if (year === '2018+') {
            if (chernobylec === 1) pensValue = Math.min(pensValue + 0.2, 1);
            else if (chernobylec === 0.95) pensValue = Math.min(pensValue + 0.2, 0.95);
            else if (strValue === 'Міліція' || strValue === 'Національна поліція') pensValue = Math.min(pensValue, 0.7);
            else pensValue = Math.min(pensValue, 0.7) + 0.2;
          }
        }
        else if (pensTypeValue === "Звільнення у зв'язку зі станом здоров'я") {
          pensValue = (55 + (lastNumber - 20) * 3) / 100;
          if (year === '2011') pensValue = Math.min(pensValue, chernobylec === 1 ? 1 : chernobylec === 0.95 ? 0.95 : 0.8);
          else if (year === '2011-2014') pensValue = Math.min(pensValue, chernobylec === 1 ? 1 : chernobylec === 0.95 ? 0.95 : 0.9);
          else if (year === '2014-2018') pensValue = Math.min(pensValue, chernobylec === 1 ? 1 : chernobylec === 0.95 ? 0.95 : 0.7);
          else if (year === '2018+') {
            if (chernobylec === 1) pensValue = Math.min(pensValue + 0.2, 1);
            else if (chernobylec === 0.95) pensValue = Math.min(pensValue + 0.2, 0.95);
            else if (strValue === 'Міліція' || strValue === 'Національна поліція') pensValue = Math.min(pensValue, 0.7);
            else pensValue = Math.min(pensValue, 0.7) + 0.2;
          }
        }
        else if (pensTypeValue === "За змішаним стажем") {
          pensValue = (50 + (mixedVal - 25) + (health === "yes" ? 5 : 0)) / 100;
          if (year === '2011') pensValue = Math.min(pensValue, chernobylec === 1 ? 1 : chernobylec === 0.95 ? 0.95 : 0.8);
          else if (year === '2011-2014') pensValue = Math.min(pensValue, chernobylec === 1 ? 1 : chernobylec === 0.95 ? 0.95 : 0.9);
          else if (year === '2014-2018') pensValue = Math.min(pensValue, chernobylec === 1 ? 1 : chernobylec === 0.95 ? 0.95 : 0.7);
          else if (year === '2018+') {
            if (chernobylec === 1) pensValue = Math.min(pensValue + 0.2, 1);
            else if (chernobylec === 0.95) pensValue = Math.min(pensValue + 0.2, 0.95);
            else if (strValue === 'Міліція' || strValue === 'Національна поліція') pensValue = Math.min(pensValue, 0.7);
            else pensValue = Math.min(pensValue, 0.7) + 0.2;
          }
        }
        else if (pensTypeValue === "По втраті годувальника") {
          pensValue = vtrata === 'radio-8' ? 0.7 : 0.3;
        }
        return pensValue;
      }

      document.getElementById('resultBtn').addEventListener('click', () => {
        const pensValue = updatePensValue();
        const invPercent = invSelection.getPercent();
        const loan = updateLoan(strValue, zvanieValue);
        let result = 0;

        if (pensTypeValue === "По інвалідності") {
          result = (dovidka === "radio-3" ? dovidkaValue : loan) * invPercent;
          if (invSelection.invalidnist === "war") result *= 1.25;
        } else {
          result = (dovidka === "radio-3" ? dovidkaValue : loan) * pensValue;
        }

        result *= 1.14;
        const tax = Math.min(result * 0.197, 1500);
        result += tax;

        if (year !== '2018+') result += 2000;

        document.querySelector('.result.price').innerText = `${Math.round(result)} грн`;
      });
    });
  </script>
</body>
</html>
